*** The purpose of this document ***

If you have missing file storage subfolders and cannot boot the client, this walks you through what to do next.


*** Expected Subfolders ***

The client expects you to have its media subfolders accessible at all times. The folders are in the format fxx or txx, where the xx is 00..ff in hexadecimal, and if you are granularity 3, they will be in the format fxx/x and txx/x.

By default, these subfolders are in 'install_dir/db/client_files', but it does not really matter where they are, and there are a couple ways to tell hydrus to expect them to be somewhere else. The client checks all expected locations on boot, and if any are missing, it throws up the 'repair file locations' dialog. You may have come here from there.

If you are not sure where the subfolders are, search your entire filesystem for whatever is missing, let's say the string 'f47'. If your file search interface allows you to specify only folders, all the better.

Tell the dialog where the folders are now, and it will stitch everything back together. If the folders are in a crazy place, it is fine to manually move them to a nice place before you boot and do the repair.

If you find everything, this is excellent. You have not lost any files. You will probably want to double-check 'database->move media files' once you boot to make sure things look correct.


*** I Lost Some Of My Folders ***

If you are missing some thumbnail folders, the client can just create them for you and then boot. It is a ton of work, but thumbs can always be regenerated.

The client will not boot without your file folders. I encourage you to try and recover them again. Find an old copy in a backup, anything. Check your recycle bin, just in case.

If you are absolutely, totally certain you cannot recover the missing subfolders, you will have to resign yourself to possibly having lost n x 256th of your file collection. Do this:

Go to the 'install_dir/static' directory and find the 'empty_client_files' files. Read the readme and open the 7z. Extract the 7z somewhere safe, like your desktop.

Tell the 'repair locations' dialog that that location is where everything missing is located. The client should now boot. If the starting page in your session has file results, you may get some error spam--wait it out.

Open up 'database->move media files' and 'remove/de-weight' your extract location. Tell it to 'move files', and it will migrate the empty folders out of your extract location and into your normal file storage.

Open up 'help my media files are broke.txt' in this same directory to learn about how you can get the client to scan for and try to recover your missing files.
